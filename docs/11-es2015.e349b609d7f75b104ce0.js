(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{DOAJ:function(n,e,t){"use strict";t.r(e),t.d(e,"LearnNumsPageModule",(function(){return k}));var i=t("ofXK"),s=t("3Pt+"),r=t("TEn/"),o=t("tyNb"),c=t("fXoL"),a=t("Bcx0");let b=(()=>{class n{constructor(){}check(n,e){return e.length==n.length?this.checkSameLength(n,e):e.length<n.length?this.checkDifferentLength(n,e):this.checkDifferentLength(e,n)}checkDifferentLength(n,e){const t=this.checkSameLength(n.substr(-e.length),e),i=n.substring(0,n.length-e.length).split("").map((e,t)=>({digit:+e,exp:n.length-t-1}));return t.bads=t.bads.concat(i),t}checkSameLength(n,e){const t=n.length-1,i=n.split("").map((n,i)=>({q:+n,a:+e[i],exponent:t-i})),s=i.filter(n=>n.a==n.q).map(n=>({digit:n.a,exp:n.exponent})),r=i.filter(n=>n.a!=n.q).map(n=>[{digit:n.a,exp:n.exponent},{digit:n.q,exp:n.exponent}]);return{goods:s,bads:[].concat(...r)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Db({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var h=t("Zjgs");let u=(()=>{class n{newHint(n){let e=0;const t=this.indexesInRandomOrder(n.length);let i=Array(n.length).fill("?");return{getHint:()=>i.join(""),nextHint:()=>{i=Array(n.length).fill("?");const s=t[e];return e=e>=t.length-1?0:e+1,i[s]=n[s],i.join("")}}}indexesInRandomOrder(n){return Array(n).fill(0).map((n,e)=>e).map(n=>[Math.random(),n]).sort().map(n=>n[1])}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=c.Db({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const d=["numberInput"];function l(n,e){if(1&n&&(c.Kb(0,"span"),c.ec(1),c.Jb()),2&n){const n=c.Ub();c.xb(1),c.fc(n.question)}}function g(n,e){if(1&n){const n=c.Lb();c.Kb(0,"ion-button",14),c.Sb("click",(function(){c.ac(n);const e=c.Ub();return e.say(e.answer)})),c.Ib(1,"ion-icon",1),c.Jb()}}let p=(()=>{class n{constructor(n,e,t,i){this.probdbService=n,this.answerChecker=e,this.speechService=t,this.hintService=i,this.score=100,this.wrongAnswer=!0,this.answerIsEmpty=!0,this.hint=""}set reset(n){this.newQuestion()}ngOnInit(){this.newQuestion()}newQuestion(){this.score=this.probdbService.getScore();const n=this.probdbService.getNumberToAsk();this.question=n.join(""),this.answer="",this.wrongAnswer=!1,this.say(this.question),this.hintManager=this.hintService.newHint(this.question),this.hint=this.hintManager.getHint(),setTimeout(()=>this.numberInput.setFocus(),0)}checkAnswer(){if(this.wrongAnswer)return void this.newQuestion();const n=this.answerChecker.check(this.question,""+this.answer);n.bads.forEach(n=>this.probdbService.bad(n.exp,n.digit)),n.goods.forEach(n=>this.probdbService.good(n.exp,n.digit)),this.wrongAnswer=n.bads.length>0,this.wrongAnswer||this.newQuestion()}inputChanged(n){this.answerIsEmpty=!n||""==n}say(n){this.speechService.say(n)}showHint(){this.hint=this.hintManager.nextHint()}}return n.\u0275fac=function(e){return new(e||n)(c.Hb(a.a),c.Hb(b),c.Hb(h.a),c.Hb(u))},n.\u0275cmp=c.Bb({type:n,selectors:[["teacher"]],viewQuery:function(n,e){var t;1&n&&c.hc(d,!0),2&n&&c.Zb(t=c.Tb())&&(e.numberInput=t.first)},inputs:{reset:"reset"},decls:16,vars:9,consts:[["name","say",3,"click"],["name","megaphone"],[4,"ngIf"],["name","hint",3,"disabled","click"],["autofocus","true","type","number","inputmode","numeric",3,"disabled","ngModel","ionChange","ngModelChange"],["numberInput",""],["name","check",3,"disabled","click"],["name","checkmark"],["color","danger","name","sayAnswer",3,"click",4,"ngIf"],["min","0","max","100","step","1","ticks","10",3,"disabled","ngModel","ngModelChange"],["slot","start"],["name","rainy"],["slot","end"],["name","happy"],["color","danger","name","sayAnswer",3,"click"]],template:function(n,e){1&n&&(c.Kb(0,"p"),c.Kb(1,"ion-button",0),c.Sb("click",(function(){return e.say(e.question)})),c.Ib(2,"ion-icon",1),c.dc(3,l,2,1,"span",2),c.Jb(),c.Kb(4,"ion-button",3),c.Sb("click",(function(){return e.showHint()})),c.ec(5),c.Jb(),c.Kb(6,"ion-input",4,5),c.Sb("ionChange",(function(n){return e.inputChanged(n.detail.value)}))("ngModelChange",(function(n){return e.answer=n})),c.Jb(),c.Kb(8,"ion-button",6),c.Sb("click",(function(){return e.checkAnswer()})),c.Ib(9,"ion-icon",7),c.Jb(),c.dc(10,g,2,0,"ion-button",8),c.Kb(11,"ion-range",9),c.Sb("ngModelChange",(function(n){return e.score=n})),c.Kb(12,"span",10),c.Ib(13,"ion-icon",11),c.Jb(),c.Kb(14,"span",12),c.Ib(15,"ion-icon",13),c.Jb(),c.Jb(),c.Jb()),2&n&&(c.xb(3),c.Xb("ngIf",e.wrongAnswer),c.xb(1),c.Xb("disabled",e.wrongAnswer),c.xb(1),c.fc(e.hint),c.xb(1),c.Xb("disabled",e.wrongAnswer)("ngModel",e.answer),c.xb(2),c.Xb("disabled",e.answerIsEmpty),c.xb(2),c.Xb("ngIf",e.wrongAnswer),c.xb(1),c.Xb("disabled",!0)("ngModel",e.score))},directives:[r.d,r.h,i.i,r.i,r.y,s.d,s.e,r.p,r.B],styles:["ion-input[_ngcontent-%COMP%]{--background:#ddd;width:10em}"]}),n})();const f=[{path:"",component:(()=>{class n{constructor(n){this.probdbService=n,this.reset=0,this.groupName="",this.subscription=this.probdbService.$ready.subscribe(n=>n&&this.init())}ngOnInit(){}ngOnDestroy(){this.subscription.unsubscribe()}init(){this.groupName=this.probdbService.getName(),this.reset=this.reset%2+1}ionViewDidEnter(){this.probdbService.ready&&this.init()}}return n.\u0275fac=function(e){return new(e||n)(c.Hb(a.a))},n.\u0275cmp=c.Bb({type:n,selectors:[["app-learn-nums"]],decls:10,vars:2,consts:[["slot","start"],["color","dark"],["name","school"],[3,"reset"]],template:function(n,e){1&n&&(c.Kb(0,"ion-header"),c.Kb(1,"ion-toolbar"),c.Kb(2,"ion-buttons",0),c.Ib(3,"ion-menu-button",1),c.Ib(4,"ion-back-button"),c.Jb(),c.Kb(5,"ion-title"),c.Ib(6,"ion-icon",2),c.ec(7),c.Jb(),c.Jb(),c.Jb(),c.Kb(8,"ion-content"),c.Ib(9,"teacher",3),c.Jb()),2&n&&(c.xb(7),c.gc(" ",e.groupName,""),c.xb(2),c.Xb("reset",e.reset))},directives:[r.g,r.u,r.e,r.n,r.b,r.c,r.t,r.h,r.f,p],styles:[""]}),n})()}];let m=(()=>{class n{}return n.\u0275mod=c.Fb({type:n}),n.\u0275inj=c.Eb({factory:function(e){return new(e||n)},imports:[[o.i.forChild(f)],o.i]}),n})();var w=t("mmKz");let k=(()=>{class n{}return n.\u0275mod=c.Fb({type:n}),n.\u0275inj=c.Eb({factory:function(e){return new(e||n)},imports:[[i.b,s.a,r.v,w.a,m]]}),n})()}}]);